---
- hosts: bootstrap
  become: yes
  tasks:
    - name: ceph orch daemon add osd .....
      ansible.builtin.shell:
        cmd: ceph orch daemon add osd {{ item.0.name }}:/dev/{{ item.1 }}
      loop: "{{ ceph_osd | subelements('packages') }}"
    - name: pause for {{ wait_seconds | int }} second(s)
      ansible.builtin.pause:
        seconds: "{{ wait_seconds | int }}"
    - name: ceph orch device ls
      ansible.builtin.shell:
        cmd: ceph orch device ls
      register: details
    - debug: msg="{{ details.stdout_lines }}"
- name: Post Install Ceph
  hosts: bootstrap
  gather_facts: no
  tasks:

  - name: run cmd ceph .........
    ansible.builtin.shell: "{{ item}}"
    loop: "{{ diagnostic_post_deploy }}"
    register: details

  - name: Debug Msg
    debug:
        msg="{{ item.stdout_lines }}"
    loop: "{{ details.results }}"

