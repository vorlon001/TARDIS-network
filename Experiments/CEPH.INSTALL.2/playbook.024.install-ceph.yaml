---
- hosts: bootstrap
  become: yes
  tasks:
 
   - name: ceph orch apply rgw ....
     ansible.builtin.shell:
       cmd: ceph orch apply rgw {{ item.name }}
     loop: "{{ ceph_s3 }}"
     register: details
   - name: Debug Msg
     debug:
         msg="{{ item.stdout_lines }}"
     loop: "{{ details.results }}"


   - name: ceph orch apply rgw ....
     ansible.builtin.shell:
       cmd: ceph orch apply rgw {{ item.name }} --port={{ item.port }}
     loop: "{{ ceph_s3 }}"
     register: details
   - name: Debug Msg
     debug:
         msg="{{ item.stdout_lines }}"
     loop: "{{ details.results }}"

   - name: ceph orch apply rgw ....
     ansible.builtin.shell:
       cmd: ceph orch apply rgw {{ item.name }} '--placement=label:rgw count-per-host:1' --port={{ item.port }}
     loop: "{{ ceph_s3 }}"
     register: details
   - name: Debug Msg
     debug:
         msg="{{ item.stdout_lines }}"
     loop: "{{ details.results }}"

   - name: pause for {{ wait_seconds | int }} second(s)
     ansible.builtin.pause:
       seconds: "{{ wait_seconds | int }}"

